<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Homework N.03</title>
    <link rel="stylesheet" href="./../style/main.css">
</head>
<body>
    <div class="main-content">
        <div class="title">
            <h1>Домашнее задание ANKETA</h1>
        </div>
        <div class="content">
            <p>
                Создать проект ANKETA. Спросить у пользователя: <br>
                фамилию, имя, отчество РАЗДЕЛЬНО (оператором prompt)<br>
                возраст в годах (оператором prompt)<br>
                пол (оператором confirm, например, "ваш пол - мужской?")<br>
                и вывести оператором alert анкету пользователя по примеру:
            </p>
            <p>
                ваше ФИО: Иванов Иван Иванович<br>
                ваш возраст в годах: 20<br>
                ваш возраст в днях: 7300<br>
                через 5 лет вам будет: 25<br>
                ваш пол: мужской<br>
                вы на пенсии: нет<br>
            </p>
            <p>
                Должен быть контроль корректности вводимых пользователем данных (например, фамилия не должна быть пустой, возраст должен быть корректной цифрой и т.д.).
                Оператор alert в коде должен использоваться ровно один раз.
            </p>
            <button onclick="run()">Run</button>
        </div>
        <div class="signature">
            Тишкевич Илья. группа:FD2-87-21
        </div>
    </div>
<script type="text/javascript">
    'use strict';

    function getName() {
        let validate = false;
        let name = '';
        while (!validate) {
            name = prompt('Введите Ваше ФИО',[name]);
            if(typeof(name) === 'string') {
                let fio = name.trim().split(' ');
                if (fio.length === 3
                    && isContainNumber(name)
                ) {
                    validate = true;
                }
            }
        }

        return name;
    }

    function getAge() {
        let validate = false;
        let age = 0;
        while (!validate) {
            let ageString = prompt('укажите Ваш возраст в годах.', [age]);
            age = parseInt(ageString);
            if(Number(ageString) === age && age > 0) {
                validate = true;
            }

        }

        return age;
    }

    function getMale() {
        return  confirm('ваш пол - мужской?');
    }

    function isContainNumber(string) {
        let result = false;
        if(typeof(string) === 'string') {
            result = parseInt(string.replace( /\D/g, '')) ? false : true;
        }

        return result;
    }

    function checkPensioner(age, isMale) {
        let result = false;
        if(typeof (isMale) === 'boolean') {
            if (isMale) {
                result = !(age < 65);
            } else {
                result = !(age < 60);
            }
        }

        return result;
    }

    function run() {
        const name = getName();
        const age = getAge();
        const isMale = getMale();
        const isPensioner = checkPensioner(age, isMale);
        const resultString = `
        ваше ФИО: ${name}
        ваш возраст в годах: ${age}
        ваш возраст в днях: ${age * 365}
        через 5 лет вам будет: ${age + 5}
        ваш пол: ${isMale ? 'мужской' : 'женский'}
        вы на пенсии: ${isPensioner ? 'да' : 'нет'}`;

        alert(resultString);
    }
</script>
</body>
</html>